TS config (nodemon configuration) - script
"devDependencies"
    "@types/node" - types specific to node
    "@types/express" - to add types specific to express
    "@types/pg"
    "nodemon"
    "ts-node"
    "typescript"
- npx tsc --init
    To initialize a typescript
    Uncomment the lines below
     "rootDir": "./src", - read the ts files from
     "outDir": "./dist", - location to store compiled js files from ts 
- "watch":["src"] 
    To watch only src folder. If not included, the docker will also watch to nodemodules folder which will cause the error saying nodemon is watching too many files.
- "ignore":["dist/*"] (optional)
    To ignore the dist folder.
-  "ext":"ts" - specified the extension (optional)

Docket File setup

- FROM node:20 - imported the node runtime from official docker hub
- Difference between RUN and CMD
    RUN executes on image creation - docker build
    A dockerfile can contain multiple one RUN 

    CMD executes on container creation / image execution - docker run
    A dockerfile can contain only one CMD 

- docker build -t task_backend .
    Creating a docker image for backend server.
    -t refers to tag to recognize the image.
    . at end refers to tell that Dockerfile is in current directory

- docker run -p 8000:8000 task_backend
    task_backend is the image name specified.
    -p refers to port
    port 8000 of our computer  mapped to port 8000 of the container



Docker Compose:
    To run more than one container simultaneously
    docker compose up --build
    --build to create image as well
    docker compose down

Volumes: 
    Volumes are used to create persistent storage on docker container.
4 Types of Volumes:
    Bind - maps a directory on host to directory on container - ./:/app
    Named - for database - reusable
    Anoynymous - creates volume with no specific source or names. used to store temporary data generated by container during its cycle. like nodemodules
    tmps files - only persisted in host



Packages:
    - Packages that required @types to be installed is to be known
    by visiting the npm site and if there is DT after the package name
    it redirects to the @types for the package.

Drizzle-kit
    It is required to run the migrations on docker container.
    We have to manually run the migration commands without it.
    - npx drizzle-kit push

    Everytime the container is restarted the database data doesnt persist.

Database data persistence - Named Volumes
    Named Volumes are created with user defined names.
    used for data persitence of the database containers.
    defined a named volume as:
        volumes:
            postgres_data:
    This named volume is added to the postgres_container as:
    volumes:
      - postgres_data:/var/lib/postgresql/data
      All the data stored in this path are stored in the named volume postgres_data.
      This volume is managed automatically by docker.

    docker compose up --build 
        - the build flag is added so that new things added would be built.
        - we just simple run
            docker compose up
            when new things are added. (new packages, new services changres in docker file)
            refer chatgpt for more
    

Middlewares:
    - Global Middlewares - app.use(express.json());
    - Route specific Middlewares - Authentication Middleware




 